(()=>{const e="https://www.booqs.net";chrome.action.onClicked.addListener((function(e){chrome.tabs.sendMessage(e.id,"Action")})),chrome.tabs.onUpdated.addListener((function(e){chrome.tabs.sendMessage(e,"Updated")})),chrome.runtime.onMessage.addListener((function(e){switch(e.action){case"openOptionsPage":chrome.runtime.openOptionsPage()}})),chrome.runtime.onConnect.addListener((function(t){t.onMessage.addListener((function(o){switch(o.action){case"inspectCurrentUser":!async function(t){const o=await new Promise((t=>{fetch(`${e}/ja/api/v1/extensions/users/fetch_current_user`,{method:"POST",mode:"cors",credentials:"include",dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((e=>e.json())).then((e=>{e.data?function(e){chrome.storage.local.set({booqsDictUserName:e.name}),chrome.storage.local.set({booqsDictIconUrl:e.icon_url}),chrome.storage.local.set({booqsDictPublicUid:e.public_uid}),chrome.storage.local.set({booqsDictToken:e.token}),chrome.storage.local.set({booqsDictPopupDisplayed:e.popup_displayed})}(e.data):(chrome.storage.local.set({booqsDictUserName:""}),chrome.storage.local.set({booqsDictIconUrl:""}),chrome.storage.local.set({booqsDictPublicUid:""}),chrome.storage.local.set({booqsDictToken:""}),chrome.storage.local.set({booqsDictPopupDisplayed:""})),t(e.data)})).catch((e=>{console.log(e),t("error")}))}));t.postMessage({data:o})}(t);break;case"search":!async function(t,o){const n=await function(t){return new Promise((o=>{let n=`${e}/api/v1/extensions/words/search`,s={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({keyword:t,dictionary_id:1}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch(n,s).then((e=>e.json())).then((e=>{o(e)})).catch((e=>{console.log(e),o(e)}))}))}(o);t.postMessage({data:n})}(t,o.keyword);break;case"renderReviewForm":!async function(t,o){const n=await function(t){return console.log(t),new Promise((o=>{let n=`${e}/ja/api/v1/extensions/reminders/review_setting`,s={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({quiz_id:t}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch(n,s).then((e=>e.json())).then((e=>{o(e)})).catch((e=>{console.log(e),o(e)}))}))}(o);t.postMessage({data:n})}(t,o.quizId);break;case"createReminder":!async function(t,o,n){const s=await function(t,o){return new Promise((n=>{let s=`${e}/ja/api/v1/extensions/reminders/create_review`,a={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({quiz_id:t,setting_number:o}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch(s,a).then((e=>e.json())).then((e=>{n(e)})).catch((e=>{console.log(e),n(e)}))}))}(o,n);t.postMessage({data:s})}(t,o.quizId,o.settingNumber);break;case"updateReminder":!async function(t,o,n){const s=await function(t,o){return new Promise((n=>{let s=`${e}/ja/api/v1/extensions/reminders/update_review`,a={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({quiz_id:t,setting_number:o}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch(s,a).then((e=>e.json())).then((e=>{n(e)})).catch((e=>{console.log(e),n(e)}))}))}(o,n);t.postMessage({data:s})}(t,o.quizId,o.settingNumber);break;case"destroyReminder":!async function(t,o){const n=await function(t){return new Promise((o=>{let n=`${e}/ja/api/v1/extensions/reminders/destroy_review`,s={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({quiz_id:t}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch(n,s).then((e=>e.json())).then((e=>{o(e)})).catch((e=>{console.log(e),o(e)}))}))}(o);t.postMessage({data:n})}(t,o.quizId);break;case"googleTranslation":!async function(t,o){const n=await function(t){return new Promise((o=>{let n=`${e}/ja/api/v1/extensions/words/google_translate`,s={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({keyword:t}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch(n,s).then((e=>e.json())).then((e=>{o(e)})).catch((e=>{console.log(e),o(e)}))}))}(o);t.postMessage({data:n})}(t,o.keyword);break;case"deeplTranslation":!async function(t,o){const n=await function(t){return new Promise((o=>{let n=`${e}/ja/api/v1/extensions/words/deepl_translate`,s={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({keyword:t}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch(n,s).then((e=>e.json())).then((e=>{o(e)})).catch((e=>{console.log(e),o(e)}))}))}(o);t.postMessage({data:n})}(t,o.keyword)}}))}))})();