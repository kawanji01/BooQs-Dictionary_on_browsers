chrome.action.onClicked.addListener((function(e){chrome.tabs.sendMessage(e.id,"Action")})),chrome.tabs.onUpdated.addListener((function(e){chrome.tabs.sendMessage(e,"Updated")})),chrome.runtime.onMessage.addListener((function(e){switch(e.action){case"openOptionsPage":chrome.runtime.openOptionsPage()}})),chrome.runtime.onConnect.addListener((function(e){e.onMessage.addListener((function(t){switch(t.action){case"inspectCurrentUser":!async function(e){const t=await new Promise((e=>{fetch("https://www.booqs.net/ja/api/v1/extension/inspect_current_user",{method:"POST",mode:"cors",credentials:"include",dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}}).then((e=>e.json())).then((t=>{t.data?function(e){chrome.storage.local.set({booqsDictUserName:e.name}),chrome.storage.local.set({booqsDictIconUrl:e.icon_url}),chrome.storage.local.set({booqsDictPublicUid:e.public_uid}),chrome.storage.local.set({booqsDictToken:e.token}),chrome.storage.local.set({booqsDictPopupDisplayed:e.popup_displayed})}(t.data):(chrome.storage.local.set({booqsDictUserName:""}),chrome.storage.local.set({booqsDictIconUrl:""}),chrome.storage.local.set({booqsDictPublicUid:""}),chrome.storage.local.set({booqsDictToken:""}),chrome.storage.local.set({booqsDictPopupDisplayed:""})),e(t.data)})).catch((t=>{console.log(t),e("error")}))}));e.postMessage({data:t})}(e);break;case"search":!async function(e,t){const o=await function(e){return new Promise((t=>{let o={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({keyword:e,dictionary_id:1}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch("https://60ca-202-177-82-121.ngrok.io/api/v1/extensions/words/search",o).then((e=>e.json())).then((e=>{t(e)})).catch((e=>{console.log(e),t(e)}))}))}(t);e.postMessage({data:o})}(e,t.keyword);break;case"renderReviewForm":!async function(e,t){const o=await function(e){return console.log(e),new Promise((t=>{let o={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({quiz_id:e}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch("https://60ca-202-177-82-121.ngrok.io/ja/api/v1/extensions/reminders/review_setting",o).then((e=>e.json())).then((e=>{t(e)})).catch((e=>{console.log(e),t(e)}))}))}(t);e.postMessage({data:o})}(e,t.quizId);break;case"createReminder":!async function(e,t,o){const n=await function(e,t){return new Promise((o=>{let n={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({quiz_id:e,setting_number:t}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch("https://www.booqs.net/ja/api/v1/extension/create_reminder",n).then((e=>e.json())).then((e=>{o(e)})).catch((e=>{console.log(e),o(e)}))}))}(t,o);e.postMessage({data:n})}(e,t.quizId,t.settingNumber);break;case"updateReminder":!async function(e,t,o){const n=await function(e,t){return new Promise((o=>{let n={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({quiz_id:e,setting_number:t}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch("https://www.booqs.net/ja/api/v1/extension/update_reminder",n).then((e=>e.json())).then((e=>{o(e)})).catch((e=>{console.log(e),o(e)}))}))}(t,o);e.postMessage({data:n})}(e,t.quizId,t.settingNumber);break;case"destroyReminder":!async function(e,t){const o=await function(e){return new Promise((t=>{let o={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({quiz_id:e}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch("https://www.booqs.net/ja/api/v1/extension/destroy_reminder",o).then((e=>e.json())).then((e=>{t(e)})).catch((e=>{console.log(e),t(e)}))}))}(t);e.postMessage({data:o})}(e,t.quizId);break;case"googleTranslation":!async function(e,t){const o=await function(e){return new Promise((t=>{let o={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({keyword:e}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch("https://www.booqs.net/ja/api/v1/extension/google_translate",o).then((e=>e.json())).then((e=>{t(e)})).catch((e=>{console.log(e),t(e)}))}))}(t);e.postMessage({data:o})}(e,t.keyword);break;case"deeplTranslation":!async function(e,t){const o=await function(e){return new Promise((t=>{let o={method:"POST",mode:"cors",credentials:"include",body:JSON.stringify({keyword:e}),dataType:"json",headers:{"Content-Type":"application/json;charset=utf-8"}};fetch("https://www.booqs.net/ja/api/v1/extension/deepl_translate",o).then((e=>e.json())).then((e=>{t(e)})).catch((e=>{console.log(e),t(e)}))}))}(t);e.postMessage({data:o})}(e,t.keyword)}}))}));